def p(n):o=n[0][-1];f,=[f for a in(n,n[::-1])for g in range(len(n)-2)for h in range(len(n[0])-2)if len(set(f:=[a[g+c//3][h+c%3]for c in range(9)]))>3>0<o!=f[0]!=f[8]!=o];[(t:=lambda o=o,h=o,c=o,*z:[o]*u+[h]*u+[c]*u)(t(f[0]),t(),t(c=f[8]))!=[a[g+c][h:[h+3*u*r,None][h+3*u*r<0]:r]for c in range(3*u)]or exec('for c in range(3*u):a[g+c][h:[h+3*u*r,None][h+3*u*r<0]:r]=t(*f[c//u*3:])')for u in range(len(n)-2)for r in(1,-1)for g in range(len(n)-3*u+1)for h in range(len(n[0]))for a in(n,n[::-1])];return n