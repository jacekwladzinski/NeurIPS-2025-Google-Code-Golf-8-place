def p(f):
 def p(t,r,e):
  if 13>r>-1<t<13>0<s[r][t]:s[r][t]=0;e+=(f[r][t],t,r),;[p(t+s,r+n,e)for s in(-1,0,1)for n in(-1,0,1)]
 s=[[*t]for t in f];o=[e for*e,i,d in enumerate(sum(f,[]))if 1<d<4!=p(i%13,i//13,e)]
 for(e,s,n),*t in o:
  for(u,p,i),*r in o:
   for d,t,r in(t!=r!=u==e)*r:f[n-i+r][s+(p-t)*(u%3-1)]=d
 return f